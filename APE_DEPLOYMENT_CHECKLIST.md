# APE (Agentic Pipeline Engine) 배포 체크리스트

이 문서는 APE Core 시스템의 배포 준비 상태를 체크하기 위한 체크리스트를 제공합니다. 내부망과 외부망 환경 모두에서 시스템이 정상적으로 작동하는지 확인하기 위한 가이드입니다.

## 시스템 준비 상태 체크리스트

### 코드 및 파일 검증

- [x] 모든 필수 파일이 존재함
  - [x] 주요 구성 파일: main.py, run.py, config.py
  - [x] 설정 디렉토리: config/
  - [x] 소스 코드 디렉토리: src/
  - [x] 데이터 디렉토리: data/
  - [x] 임베딩 모델 디렉토리: models/

- [x] 필수 모듈 구현 검증
  - [x] llm_service.py - LLM 서비스 연동
  - [x] router.py - API 엔드포인트
  - [x] agent_manager.py - 에이전트 관리
  - [x] network_manager.py - 네트워크 관리

- [x] 내부망/외부망 전환 코드 구현 검증
  - [x] network_config.py 및 네트워크 관리 로직
  - [x] 내부망/외부망 모델 정의 (models_internal.py, models_external.py)
  - [x] 자동 전환 로직 (fallback 처리)

### 환경 및 실행 검증

- [x] 의존성 패키지 정의 (requirements.txt)
  - [x] 기본 의존성: fastapi, uvicorn, requests, pydantic 등
  - [x] AI/ML 관련 의존성: langchain, langgraph, torch 등
  - [x] 버전 호환성 확인

- [x] 환경 설정 파일 준비
  - [x] .env 파일 필요 여부 확인
  - [x] 내부망/외부망 환경별 환경변수 설정 방법 검증
  - [x] 기본 설정 로딩 로직 검증

- [x] 설치 및 실행 스크립트 검증
  - [x] setup.sh - 기본 설치 스크립트
  - [x] setup_internal.sh - 내부망 환경 설치 스크립트
  - [x] 초기화 및 시작 로직 검증

### API 및 보안 설정

- [x] API 서버 설정 검증
  - [x] 호스트/포트 설정 검증
  - [x] 엔드포인트 구현 검증
  - [x] 상태 체크 및 헬스 체크 엔드포인트

- [x] 보안 설정 검증
  - [x] SSL 설정 지원 여부
  - [x] API 키 및 인증 로직 구현
  - [x] 내부망 연결 설정 보안 검증

## 내부망/외부망 연결 테스트 체크리스트

### 외부망 모드 테스트

- [ ] OpenRouter API 연결 테스트
  - [ ] 기본 모델 (openrouter-claude) 연결 확인
  - [ ] 응답 및 스트리밍 기능 확인
  - [ ] 에러 처리 및 재시도 로직 확인

- [ ] 외부망 모드에서 API 테스트
  - [ ] 직접 쿼리 (/query) 엔드포인트 테스트
  - [ ] RAG 에이전트 (/agents/rag) 테스트
  - [ ] 문서 관리 기능 테스트

### 내부망 모드 테스트

- [ ] 내부 LLM 서비스 연결 테스트
  - [ ] 내부 모델 (internal-model) 연결 확인
  - [ ] 응답 및 스트리밍 기능 확인
  - [ ] 에러 처리 및 재시도 로직 확인

- [ ] 내부망 모드에서 API 테스트
  - [ ] 직접 쿼리 (/query) 엔드포인트 테스트
  - [ ] RAG 에이전트 (/agents/rag) 테스트
  - [ ] 문서 관리 기능 테스트

### 하이브리드 모드 테스트

- [ ] 자동 전환 테스트
  - [ ] 내부망 실패 시 외부망으로 전환 기능 테스트
  - [ ] 외부망 실패 시 내부망으로 전환 기능 테스트
  - [ ] 전환 시 로깅 및 모니터링 기능 확인

## 기능 테스트 체크리스트

- [ ] 에이전트 시스템 테스트
  - [ ] RAG 에이전트 기능 테스트
  - [ ] 문서 관리 에이전트 기능 테스트
  - [ ] LangGraph 에이전트 기능 테스트

- [ ] 임베딩 및 문서 처리 테스트
  - [ ] 임베딩 모델 로딩 및 벡터화 테스트
  - [ ] ChromaDB 연동 및 저장/검색 테스트
  - [ ] 문서 관리 기능 (업로드/검색/삭제) 테스트

- [ ] SWDP 인터페이스 테스트
  - [ ] SWDP API 연동 테스트
  - [ ] 사용자 정보 및 프로젝트 조회 테스트
  - [ ] 빌드 정보 및 TR 관련 기능 테스트

## 배포 준비 체크리스트

- [ ] 문서화 준비
  - [ ] API 문서 준비 (Swagger UI 활성화)
  - [ ] 사용자 가이드 준비
  - [ ] 개발자 가이드 준비

- [ ] 로깅 및 모니터링 설정
  - [ ] 로그 레벨 및 로그 포맷 설정
  - [ ] 에러 처리 및 로깅 검증
  - [ ] 모니터링 메트릭 확인

- [ ] 운영 준비
  - [ ] 시스템 시작/정지 스크립트 준비
  - [ ] 백업 및 복구 절차 문서화
  - [ ] 문제 해결 가이드 준비

## 결론

이 체크리스트는 APE Core 시스템의 배포 준비 상태를 확인하기 위한 가이드입니다. 모든 항목을 확인하고 테스트한 후에 배포를 진행하는 것이 좋습니다.

현재 시스템 검토 결과:
- 주요 코드 및 파일 검증: **완료**
- 환경 및 실행 검증: **완료**
- API 및 보안 설정 검증: **완료**
- 내부망/외부망 연결 테스트: **진행 필요**
- 기능 테스트: **진행 필요**
- 배포 준비: **진행 필요**

### 권장 배포 단계

1. 내부망 환경에 배포 전 내부 LLM 서비스 연결 정보 확인 및 설정
2. 배포 환경에 맞게 `.env` 파일 구성
3. 설치 스크립트 실행 (`setup.sh` 또는 `setup_internal.sh`)
4. 서비스 시작 및 상태 확인
5. 기능 테스트 수행
6. 문제점 수정 및 재배포 (필요시)
7. 운영 모니터링 체계 구축

내부망/외부망 전환 기능은 시스템의 핵심 기능으로, 실제 배포 환경에서 충분한 테스트가 필요합니다.